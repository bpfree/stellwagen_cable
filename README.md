# Stellwagen Cable Routing
## Cable routing analysis for Stellwagen National Marine Sanctuary

**Point of contact**  
* **Cable analysis lead:** [Alyssa Randall](mailto:alyssa.randall@noaa.gov)

### **Repository Structure**

-   **data**
    -   **a_raw_data:** the raw data integrated in the analysis (**Note:** original data name and structure were kept except when either name was not descriptive or similar data were put in same directory to simplify input directories)
    -   **b_intermediate_data:** disaggregated processed data
    -   **c_analysis_data:** processed data for analyzing in the wind siting submodel
    -   **d_raster_data:** final cost raster data for offshore wind area region
    -   **e_least_cost_path_data:** least cost path corridors generated by ArcGIS Pro's tool
-   **code:** scripts for cleaning, processing, and analyzing data
-   **figures:** figures generated to visualize analysis
-   **methodology:** detailed [methods]() for the data and analysis

***Note for PC users:*** The code was written on a Mac so to run the scripts replace "/" in the pathnames for directories with two "\\".

Please contact Brian Free ([brian.free@noaa.gov](mailto:brian.free@noaa.gov)) with any questions regarding the code.

### **Study region**


### Data sources
| **Layer** | **Data Source** | **Download Link** | **Metadata**  | **Notes** |
|---------------|---------------|---------------|---------------|---------------|
| Ocean disposal sites | NOAA / OCM | [Ocean disposal sites](https://marinecadastre.gov/downloads/data/mc/OceanDisposalSite.zip) | [Metadata](https://www.fisheries.noaa.gov/inport/item/54193) | [MarineCadastre](https://hub.marinecadastre.gov/datasets/noaa::ocean-disposal-sites) |
| Intertidal flats | Massachusetts CZM | [Intertidal Flats](https://czm-moris-mass-eoeea.hub.arcgis.com/datasets/Mass-EOEEA::intertidal-flats)|[Metadata](https://www.arcgis.com/sharing/rest/content/items/cc7505bab5d44e5d9c9984a887e6bb3e/info/metadata/metadata.xml?format=default&output=html)| [RESTService](https://services1.arcgis.com/7iJyYTjCtKsZS1LR/ArcGIS/rest/services/Intertidal_Flats/FeatureServer/0) |
| Preliminary offshore sand resources APTIM Technical Report No. 631226219 (2018) | Massachusetts CZM | [Sand patches](https://czm-moris-mass-eoeea.hub.arcgis.com/datasets/Mass-EOEEA::preliminary-offshore-sand-resources-aptim-technical-report-no-631226219-2018) | [Metadata](https://www.arcgis.com/sharing/rest/content/items/be12362142734c6d8e50392dd219eec5/info/metadata/metadata.xml?format=default&output=html) | [RESTService](https://services1.arcgis.com/7iJyYTjCtKsZS1LR/arcgis/rest/services/Preliminary_offshore_sand_resources_APTIM_Technical_Report_No_631226219_2018/FeatureServer/0) |
| National Channel Framework - Channel Area (ACOE) | CZM MORIS | [Channel areas](https://czm-moris-mass-eoeea.hub.arcgis.com/datasets/Mass-EOEEA::national-channel-framework-channel-area-acoe) | [Metadata](https://mass-eoeea.maps.arcgis.com/sharing/rest/content/items/9227967a2748410983352b501c0c7b39/info/metadata/metadata.xml?format=default&output=html) | [RESTService](https://services7.arcgis.com/n1YM8pTrFmm7L4hs/ArcGIS/rest/services/National_Channel_Framework/FeatureServer/1) |
| Anchorages |NOAA / OCM | [Anchorage areas](https://marinecadastre.gov/downloads/data/mc/Anchorage.zip) | [Metadata](https://www.fisheries.noaa.gov/inport/item/48849) | [MarineCadastre](https://hub.marinecadastre.gov/datasets/noaa::anchorages) |
| Habitat | Northeast Ocean Data | [Eelgrass meadows](https://www.northeastoceandata.org/files/metadata/Themes/Habitat.zip) | [Metadata](https://www.northeastoceandata.org/files/metadata/Themes/Habitat/EelgrassMeadows.pdf) | --------------- |
| Cable and pipelines |---------------|[Cable and pipelines](https://www.northeastoceandata.org/files/metadata/Themes/EnergyAndInfrastructure.zip)|[Metadata](https://www.northeastoceandata.org/files/metadata/Themes/EnergyAndInfrastructure/CableAndPipelineAreas.htm)|---------------|
| Submarine cables |---------------|[Submarine cables](https://www.northeastoceandata.org/files/metadata/Themes/EnergyAndInfrastructure.zip)|[Metadata](https://www.northeastoceandata.org/files/metadata/Themes/EnergyAndInfrastructure/SubmarineCables.htm)|---------------|
| Neptune LNG Pipeline | Massachusetts CZM | [Liquid natural gas](https://czm-moris-mass-eoeea.hub.arcgis.com/datasets/Mass-EOEEA::neptune-lng-pipeline) | [Metadata](https://www.arcgis.com/sharing/rest/content/items/0df6b39f58444cc9a236755b75d1c92b/info/metadata/metadata.xml?format=default&output=html) | [RESTService](https://services1.arcgis.com/7iJyYTjCtKsZS1LR/arcgis/rest/services/Neptune_LNG_Pipeline/FeatureServer/1) |
| Northeast Gateway LNG Pipeline | Massachusetts CZM | [Liquid natural gas](https://czm-moris-mass-eoeea.hub.arcgis.com/datasets/Mass-EOEEA::northeast-gateway-lng-pipeline) | [Metadata](https://www.arcgis.com/sharing/rest/content/items/7826f80140934c869571dfb2b46f0313/info/metadata/metadata.xml?format=default&output=html) | [RESTService](https://services1.arcgis.com/7iJyYTjCtKsZS1LR/arcgis/rest/services/Northeast_Gateway_LNG_Pipeline/FeatureServer/1) |
| Algonquin Hubline LNC Pipeline | Massachusetts CZM | [Liquid natural gas](https://czm-moris-mass-eoeea.hub.arcgis.com/datasets/Mass-EOEEA::algonquin-hubline-lnc-pipeline) | [Metadata](https://www.arcgis.com/sharing/rest/content/items/8cbe1bdd72a443a5bf04c2d50c78df10/info/metadata/metadata.xml?format=default&output=html) | [RESTService](https://services1.arcgis.com/7iJyYTjCtKsZS1LR/arcgis/rest/services/Algonquin_Hubline_LNC_Pipeline/FeatureServer/1) |
| CONMAPSG | USGS | [CONMAPSG](https://pubs.usgs.gov/of/2005/1001/data/conmapsg/conmapsg.zip) | [Metadata](https://pubs.usgs.gov/of/2005/1001/data/conmapsg/conmapsg.htm)  ([text](https://pubs.usgs.gov/of/2005/1001/data/conmapsg/conmapsg-metadata.txt)) | [FAQ](https://pubs.usgs.gov/of/2005/1001/data/conmapsg/conmapsg-faq.htm), Data provided for the analysis are more expansive than this dataset |
| Shipping lanes | NOAA | [Boundary](http://encdirect.noaa.gov/theme_layers/data/shipping_lanes/shippinglanes.zip) | [Metadata](https://www.fisheries.noaa.gov/inport/item/39986) | [Northeast Ocean Data portal](https://www.northeastoceandata.org/data-download/?#MarineTransportation) |
| Seascape derivatives | --------------- | [Slope](https://services.northeastoceandata.org/downloads/Habitat/SeascapesDerivatives.zip) | --------------- |
| Stellwagen National Marine Sanctuary | [NOAA Sanctuaries](https://sanctuaries.noaa.gov/library/imast_gis.html) | [Boundary](https://sanctuaries.noaa.gov/library/imast/sbnms_py2.zip) | |  [Map](https://nmssanctuaries.blob.core.windows.net/sanctuaries-prod/media/archive/visit/images/sb_map_big.jpg) |

Data for the gravel sediment came from [Michael Thompson](mailto:michael.a.thompson@noaa.gov). As stated from him: "The sediment layer was
derived collaboratively with a sanctuary led working group (USGS/NOAA Fisheries/NEFMC/UConn/UMass/BU/MA CZM & Stellwagen researchers) that
created the 3 class breaks from the multibeam backscatter data with ground truthing and was well vetted for use in the NEFMC habitat amendment
works (including their SASI model). The boulder ridges were a polygon layer provided by USGS which were rasterized and added to the sediment
raster to give it a 4th value (1-mud, 2-sand, 3-gravel, 4-boulder)."

| **Value** | **Score** | **Classification** |
|---------------|---------------|---------------|
| 1 - 75 | 1 | Mud |
| 76 - 165 | 2 | Sand |
| 166 - 255 | 3 | Gravel |
| NA | 4 | Boulder |

### Methods
#### Costs
| **Layer** | **Buffer distance (m)** | **Score** | **Notes** |
|---------------|---------------|---------------|---------------|
| Sediment (CONMAPSG) - Sand/Mud | --------------- | 0.2 | |
| Sediment (CONMAPSG) - Mix | --------------- | 0.4 | |
| Sediment (CONMAPSG) - Gravel | --------------- | 0.6 | |
| Sediment (CONMAPSG) - Rock | --------------- | 1.0 | |
| Active and Inactive Disposal Sites | 500 | 0.8 | |
| Intertidal Flats | 500 | 0.2 | |
| Sand Patches | 500 | 1.0 | |
| Channel Areas | 600 | 1.0 | |
| Anchorage Areas | 600 | 0.8 | |
| Eelgrass Meadows | 675 | 0.4 | |
| Cable and Pipeline Areas | 675 | 0.4 | |
| Submarine Cables | 675 | 0.4 | |
| LNG Pipelines | 675 | 0.4 | |

#### Barriers
| **Layer** | **Buffer distance (m)** | **Notes** |
|---------------|---------------|---------------|
| Coral points | 675 | Provided by MA CZM |
| Sites to avoid | 1000 | Provided by NMS |
| Boulder ridges | 500 | Provided by NMS |
| Cape Cod shore | 500 | Generated by MA CZM |

#### Points of connection
This analysis used the same ending points for all cable routing scenarios. Starting points got split into three separate options:
- Starting Point (option 1): center of the Gulf of Maine PSN leases: 0564 and 0567. ([map of leases](https://www.boem.gov/renewable-energy/offshore-renewable-activities), [Gulf of Maine activities](https://www.boem.gov/renewable-energy/state-activities/maine/gulf-maine))
- Staring Point (option 2): centralized of the Gulf of Maine PSN OCS-A 0564
- Staring Point (option 3): centralized of the Gulf of Maine PSN OCS-A 0567
- Ending Points: Plymouth and Boston (points were randomly selected to represent those two localities)

#### Stellwagen
Stellwagen National Marine Sanctuary ([data](https://sanctuaries.noaa.gov/library/imast/sbnms_py2.zip) and [map](https://sanctuaries.noaa.gov/visit/images/sb_map_big.jpg)) got split into two sections to determine how cable routing would get affected if limited to a northern or a southern route. The regions got split around the "traffic separation schemes" that influence vessel traffic into and out of Boston Harbor. [Three separation schemes](http://encdirect.noaa.gov/theme_layers/data/shipping_lanes/shippinglanes.zip) split were removed from the study area and left north and southern sections. Each section became barriers to the cable routing analysis; thus each got separately removed from the Stellwagen National Marine Sanctuary to create two new cost rasters.

#### Least cost path
This analysis leveraged the ["Least Cost Path" toolkit](https://pro.arcgis.com/en/pro-app/latest/tool-reference/spatial-analyst/creating-the-least-cost-path.htm) in Esri's ArcGIS Pro version 3.3. The tool works by summing all the "costs" moving from some identified starting point(s) to other identified ending (points). The costs are the sum of data layers overlapping in a predefined study region to create the cost surface -- think of this as a board where moving a piece is more challenging if certain areas are a forest, mountain, or sand, so going a slightly longer way on an easier path or a short way through a challenging part will be the take less effort.

Three scenarios got investigated in this analysis for each starting option:

1. Normal barriers -- all data layers with costs got summarized to a simple cost raster that had the 4 barriers removed (coral points, sites to avoid, boulder ridges, and Cape Cod shore)
2. North barrier -- the normal scenario with an additional area removed that was the northern section of Stellwagen National Marine Sanctuary (as defined by as part of the marine sanctuary that fell north of the traffic separation schemes from the [shipping lanes dataset](http://encdirect.noaa.gov/theme_layers/data/shipping_lanes/shippinglanes.zip))
2. South barrier -- the normal scenario with an additional area removed that was the southern section of Stellwagen National Marine Sanctuary (as defined by as part of the marine sanctuary that fell south of the traffic separation schemes from the [shipping lanes dataset](http://encdirect.noaa.gov/theme_layers/data/shipping_lanes/shippinglanes.zip))

It should get noted that the leastcostpath package in R had been investigated as a possible option, but it was ruled out as a viable option till more work can get done ([GitHub repository](https://github.com/josephlewis/leastcostpath), [CRAN](https://cran.r-project.org/web/packages/leastcostpath/index.html), [reference manual](https://cran.r-project.org/web/packages/leastcostpath/leastcostpath.pdf)).

##### Documented issues
*7 August 2024*

1. What is happening with the coral points data? Data source is unknown and data shared seem to have a 175-meter buffer already applied, yet the analysis details a 675-meter buffer. [**Update on 12 August 2024:** per [Brooke Hodge](mailto:brooke.hodge@mass.gov)'s response on the data source being from NOAA's deep-sea coral dataset and supplemented from another data source, strangely there are instance where some data from the deep-sea coral dataset do not get included in the previously shared coral point data, but also there exist data in the dataset that do not appear in the previously shared data.

Put simply, the previously shared data lack some of the deep-sea coral dataset provided by NOAA but also have additional supplemental data. How are these two conditions reconciled?]

*8 August 2024*
1. [Submarine cable area data](https://www.northeastoceandata.org/files/metadata/Themes/EnergyAndInfrastructure.zip) by [Northeast Ocean Data](https://www.northeastoceandata.org/data-download/) differ than the [data](https://hub.marinecadastre.gov/datasets/noaa::submarine-cable-areas/) provided by [MarineCadastre](https://hub.marinecadastre.gov/). Northeast Ocean Data provided data got integrated due to past use in previous model iterations. However, the [metadata document](https://www.northeastoceandata.org/files/metadata/Themes/EnergyAndInfrastructure/SubmarineCables.htm) suggest they are originally from ENC Direct (see [map services](https://nauticalcharts.noaa.gov/learn/encdirect/#map-services)). When comparing data between the two providers there exist differences and discrepancies. The document does not detail enough why these discrepancies exist or how to reconcile them.
2. [Northeast Ocean Data](https://www.northeastoceandata.org/data-download/) [cable and pipeline data](https://www.northeastoceandata.org/files/metadata/Themes/EnergyAndInfrastructure.zip) differ from [data](https://marinecadastre.gov/downloads/data/mc/PipelineArea.zip) hosted on [MarineCadastre](https://hub.marinecadastre.gov/). The [metadata document](https://www.northeastoceandata.org/files/metadata/Themes/EnergyAndInfrastructure/CableAndPipelineAreas.htm) suggests the Northeast Ocean Data data got created by combining ENC Direct data at the approach and harbor data for the submarine cable areas and the pipelines. Still unclear why and how differences exist across the datasets.
3. What is happening with the "G or R" data within the CONMAPSG dataset? It did not get a classification? Neither has "R". Should "G or R" get called gravel or both classified as rock? [**Update 12 August 2024:** per [Brooke Hodge](mailto:brooke.hodge@mass.gov), both can get classified as "rock".]
4. Previous analysis used a active and inactive disposal sites dataset seems to have one fewer objects than the [current available dataset](https://marinecadastre.gov/downloads/data/mc/OceanDisposalSite.zip). Are the previous data just old? Something off about the new data? [**Update on 12 August 2024:** per [Brooke Hodge](mailto:brooke.hodge@mass.gov) the additional area is a temporary extension, but the analysis can get run with the currently available data.]

*9 August 2024*
1. Past analysis had a coordinate reference system that has units in US survey foot. (NAD83 UTM 19N). According to NIST, US survey feet one should avoid using US survey foot units. This seems to make instinctive sense to me given all the setbacks are in meters not imperial units. [**Update 7 August 2024:** per [Daniel Sampson](mailto:daniel.sampson@mass.gov) the preferred coordinate reference system is NAD83 with a EPSG code of 26986; **Update 12 August 2024:** per [Brooke Hodge](mailto:brooke.hodge@mass.gov), a coordinate system for UTM19N would likely be fine to use]
2. No active nor inactive disposal sites were located within the study region. The previous analysis seems to not have limited to only the active nor inactive disposal sites, but all disposal sites. On the [Northeast Ocean Data portal](https://www.northeastoceandata.org/data-explorer/?{%22point%22:{%22x%22:-7853860.492685382,%22y%22:5218536.5263483375,%22spatialReference%22:{%22wkid%22:102100,%22latestWkid%22:3857}},%22zoom%22:11,%22basemap%22:%22oceans%22,%22layers%22:[{%22url%22:%22https://services.northeastoceandata.org/arcgis1/rest/services/MarineTransportation_Navigation/MapServer/34#Navigation%22,%22name%22:%22Active%20Ocean%20Disposal%20Site%22,%22opacity%22:0.8},{%22url%22:%22https://services.northeastoceandata.org/arcgis1/rest/services/MarineTransportation_Navigation/MapServer/50#Navigation%22,%22name%22:%22Inactive%20Ocean%20Disposal%20Site%22,%22opacity%22:0.8}]}) for "Inactive" and "Active" ocean disposal sites the status are recorded as those: "inactive" and "active". The [downloaded data](https://marinecadastre.gov/downloads/data/mc/OceanDisposalSite.zip), however, from Marine Cadastre have additional statuses: "approved", "discontinued", and "unknown". Some of the statuses in the data from Northeast Ocean Data portal labeled as "inactive" are qualified as "Discontinued" in the Marine Cadastre dataset. How have "approved", "discontinued", and "unknown" been relabeled as "active" and "inactive"?

*3 September 2024*
1. Shoreline limit for Cape Cod seems to come from the USGS global islands dataset. Is this dataset preferable to the Massachusetts [Coastal Zone Management dataset on shorelines between 1800 - 2014](https://czm-moris-mass-eoeea.hub.arcgis.com/datasets/783773f353f846a4ae0d5f4dcbcb9919_3)? The USGS global islands dataset got published in 2019 -- data were from 2014 as well. Which is the more authoritative data source?
2. For the sites to avoid, most of the entries are wrecks. Publically available datasets for shipwrecks include: [AWOIS Wrecks](https://wrecks.nauticalcharts.noaa.gov/downloads/AWOIS_Wrecks.zip), [ENC Wrecks](https://wrecks.nauticalcharts.noaa.gov/downloads/ENC_Wrecks.zip), and [AWOIS Obstructions](https://wrecks.nauticalcharts.noaa.gov/downloads/AWOIS_Obstructions.zip). Other data included in the sites to avoid have descriptions of: "Boulder In", "Mud In", "Sand In", "Gravel In", "Sandtrap", and "NoiseReference". Cannot get determined the provider of the latter data.
3. What was the provider of the boulder ridges data?

*11 September 2024*
1. How should cells that do not have any data from a particular dataset get analyzed? It makes the most sense to give value of 0 as there is no cost for that particular location for that particular dataset.
2. How were start and end points chosen? Any particular coordinates or just randomized?
3. Which data did the analysis to split [Stellwagen National Marine Sanctuary](https://sanctuaries.noaa.gov/library/imast/sbnms_py2.zip) into north and southern regions? [**Update 11 September 2024:** per [Alyssa Randall](mailto:alyssa.randall@noaa.gov) the data came from traffic lane layer on [Northeast Ocean Data portal](https://www.northeastoceandata.org/data-download/?#MarineTransportation). Those data direct you to [data hosted on ENC Direct](http://encdirect.noaa.gov/theme_layers/data/shipping_lanes/shippinglanes.zip).]

*1 October 2024*
1. Should the CONMAPSG gravel data and NMS sediment get combined or remain separate? [**Update 1 October 2024:** per [Alyssa Randall](mailto:alyssa.randall@noaa.gov) the data are remaining separate]
2. Should the CONMAPSG gravel data get a value of 0.5 from the present 0.6? [**Update 1 October 2024:** per [Alyssa Randall](mailto:alyssa.randall@noaa.gov) the data will get a value of 0.5 to keep consistent with the suggestion by NMS]

